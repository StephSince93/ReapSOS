<ion-header>

  <ion-navbar>
    <ion-title>MANAGE CREW</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <form #f="ngForm" (ngSubmit)="onSubmit(f)">
    <ion-list>

      <ion-item class="formField ionField">
        <ion-label color="primary" class="searchableLabel" stacked >SELECT JOB</ion-label>
          <select-searchable
          class="specialSelect"
          item-content
          [(ngModel)]="globalJob"
          [items]="jobArray"
          title="Job"
          itemValueField=ID
          itemTextField=JobName
          name="Job"
          [canSearch]="true"
          [canClear]="true"
          [isMultiple]="false"
          (onChange)="jobChange($event)">
        </select-searchable>
      </ion-item>
<br>
      <ion-label *ngIf="!noJob; else emptyJob" class="headerLabel" stacked>CURRENT JOB</ion-label>
        <ion-grid>
          <ion-row *ngIf="!noJob">
            <ion-col>NAME:</ion-col>
            <ion-col col-10>{{globalJob?.JobName}}</ion-col>
            <!-- <ion-col><button type="button" (tap)="removePersonnel(i)" ion-button class="trashButton"><ion-icon name="trash" ios="ios-trash" md="md-trash"></ion-icon></button></ion-col> -->
          </ion-row>
        </ion-grid>
      <ng-template #emptyJob>
      <ion-label class="headerLabel" stacked>NO JOB SELECTED</ion-label>
      </ng-template>
<br>
<hr>
<br>
<br>
<!-- <div *ngIf="!noJob">
      <ion-item class="formField ionField">
        <ion-label color="primary" class="searchableLabel" stacked >SELECT PHASE CODE</ion-label>
          <select-searchable
          class="specialSelect"
          item-content
          [(ngModel)]="globalPhaseCode"
          [items]="phaseArray"
          title="PhaseCode"
          itemValueField=PhaseCode
          itemTextField=Description
          name="Phase"
          [canSearch]="true"
          [canClear]="true"
          [isMultiple]="false"
          (onChange)="phaseChange($event)">
        </select-searchable>
      </ion-item>
<br>
      <ion-label *ngIf="!noPhaseCode; else emptyPhaseCode" class="headerLabel" stacked>CURRENT PHASE CODE</ion-label>
        <div *ngIf="globalPersonnel; else emptyPersonnel">
        <ion-grid *ngIf="!noPhaseCode">
          <ion-row>
            <ion-col col-4>PHASE CODE:</ion-col>
            <ion-col col-8>{{globalPhaseCode?.Description}}</ion-col>
            <ion-col><button type="button" (tap)="removePersonnel(i)" ion-button class="trashButton"><ion-icon name="trash" ios="ios-trash" md="md-trash"></ion-icon></button></ion-col>
          </ion-row>
        </ion-grid>
      /div>
      <ng-template #emptyPhaseCode>
      <ion-label class="headerLabel" stacked>NO PHASE CODE SELECTED</ion-label>
      </ng-template>
<br>
<hr>
<br>
<br> -->
      <ion-item class="formField ionField">
        <ion-label color="primary" class="searchableLabel" stacked >SELECT PERSONNEL</ion-label>
          <select-searchable
          class="specialSelect"
          item-content
          [(ngModel)]="globalPersonnel"
          [items]="personnelArray"
          title="Personnel"
          itemValueField=ID
          itemTextField=Name
          name="Personnel"
          [canSearch]="true"
          [canClear]="true"
          [isMultiple]="true"
          (onChange)="personnelChange($event)">
        </select-searchable>
      </ion-item>
<br>
      <ion-label *ngIf="!noPersonnel; else emptyPersonnel" class="headerLabel" stacked>CURRENT PERSONNEL</ion-label>
        <!-- <div *ngIf="globalPersonnel; else emptyPersonnel"> -->
        <ion-grid  *ngFor="let personnel of globalPersonnel;let i = index">
          <ion-row>
            <ion-col col-6><b>NAME:</b><br> {{personnel?.Name}}</ion-col>
            <ion-col col-6><b>BILL CODE/TITLE:</b><br> {{personnel?.Title}}</ion-col>
          </ion-row>
          <ion-row>
            <!-- <ion-col><button type="button" (tap)="removePersonnel(i)" ion-button class="trashButton"><ion-icon name="trash" ios="ios-trash" md="md-trash"></ion-icon></button></ion-col> -->
          </ion-row>
        </ion-grid>
      <!-- </div> -->
      <p>Personnel Billing Codes can be changed in Field Ticket Form!</p>
      <ng-template #emptyPersonnel>
      <ion-label class="headerLabel" stacked>NO PERSONNEL SELECTED</ion-label>
      </ng-template>
<br>
<hr>
<br>
<br>
      <ion-item class="formField ionField" >
          <ion-label color="primary" class="searchableLabel" stacked>SELECT EQUIPMENT</ion-label>
            <select-searchable
            class="specialSelect"
             item-content
             [(ngModel)]="globalEquipment"
             [items]="equipmentArray"
             title="Equipment"
             itemValueField=ID
             itemTextField=Name
             name="Equipment"
             [canSearch]="true"
             [canClear]="true"
             [isMultiple]="true"
             (onChange)="equipmentChange($event)">
            </select-searchable>
        </ion-item>
<br>
        <ion-label class="headerLabel" *ngIf="!noEquipment; else emptyEquipment" stacked>CURRENT EQUIPMENT</ion-label>
          <!-- <div *ngIf="globalEquipment; else emptyEquipment"> -->
          <ion-grid *ngFor="let equipment of globalEquipment;let i = index">
            <ion-row>
              <ion-col>NAME:</ion-col>
              <ion-col col-10>{{equipment?.Name}}</ion-col>
              <!-- <ion-col><button type="button" (tap)="removeEquipment(i)" ion-button class="trashButton"><ion-icon name="trash" ios="ios-trash" md="md-trash"></ion-icon></button></ion-col> -->
            </ion-row>
          </ion-grid>
        <!-- </div> -->
        <ng-template #emptyEquipment>
        <ion-label class="headerLabel" stacked>NO EQUIPMENT SELECTED</ion-label>
        </ng-template>
<br>
<hr>
<br>
<br>

<!-- </div> -->
      <ion-item>
        <button [disabled]="!f.valid" type="submit" id="submitButton" ion-button full large>Submit</button>
     </ion-item>
   </ion-list>
  </form>
</ion-content>

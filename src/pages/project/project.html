<ion-header>

  <ion-navbar>
    <ion-title>NEW PROJECT</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
  <form #f="ngForm" (ngSubmit)="onSubmit(f)">
    <ion-list>


      <ion-item class="formField ionField">
        <ion-label color="primary" stacked>PROJECT NAME</ion-label>
        <ion-input
          #projectName
          ngModel
          name="projectName">
        </ion-input>
      </ion-item>

      <ion-item  class="location">
      <ion-chip>
          <p>NEAREST LOCATIONS</p>
          <button ion-button type="button" [disabled]="selectedClosestLoc" clear color="primary" (click)="grabLocation()">
              <ion-icon class="locIcon" name="navigate"></ion-icon>
          </button>
       </ion-chip>
       <ion-chip>
           <p>RESET</p>
           <button ion-button type="button" [disabled]="!selectedClosestLoc" clear color="primary" (click)="resetLocation()">
               <ion-icon class="locIcon" name="refresh"></ion-icon>
           </button>
       </ion-chip>
    </ion-item>

      <ion-item class="formField ionField" *ngIf="!selectedClosestLoc">
        <ion-label color="primary" stacked >LOCATION</ion-label>
          <select-searchable
          item-content
          [(ngModel)]="location"
          [items]="locationsArray"
          title="Location"
          itemValueField=ID
          itemTextField=Location
          name="Location"
          [canSearch]="true"
          [canClear]="true"
          (onChange)="searchableChange($event)">
        </select-searchable>
      </ion-item>

      <ion-item class="formField ionField" *ngIf="selectedClosestLoc">
      <!-- data thrown into dropdown from API -->
      <ion-label stacked>NEAREST LOCATION</ion-label>
        <select-searchable
         item-content
         ngModel
         title="updatedLocation"
         itemValueField=ID
         itemTextField=Location
         name="updatedLocation"
         [items]="updatedLocation"
         [canSearch]="true"
         [canClear]="true"
         [focusSearchbar]="true"
         (onChange)="searchableChange($event)">
       </select-searchable>
    </ion-item>

      <ion-item class="formField ionField">
        <ion-label color="primary" stacked >COMPANY MAN</ion-label>
        <ion-input ngModel name="companyMan">
        </ion-input>
      </ion-item>

      <ion-item class="formField ionField">
        <ion-label color="primary" stacked>AFE/ORDER NUMBER</ion-label>
        <ion-select
          [(ngModel)]="orderNumber"
          name="orderNumber"
          interface="action-sheet">
          <ion-option value=newAFE>*CREATE NEW AFE</ion-option>
          <ion-option value={{afe.Name}} *ngFor="let afe of afeArray" selected="afe.Name == '1'">{{afe.Name}}</ion-option>
        </ion-select>
      </ion-item>

      <ion-item class="formField ionField" *ngIf="orderNumber == 'newAFE'">
        <ion-label color="primary" stacked>NEW AFE</ion-label>
        <ion-label class="warningLabel"*ngIf="orderNumber.touched" text-wrap>Note: You will need to sync app in settings for New AFE to apply!</ion-label>
        <ion-input type="text" ngModel name="orderNumber" #orderNumber="ngModel"></ion-input>
      </ion-item>

      <ion-item>
        <button [disabled]="!f.valid" type="submit" id="submitButton" ion-button full large>Submit</button>
     </ion-item>
   </ion-list>
  </form>
</ion-content>
<!-- <ion-footer>
  <ion-toolbar>
    <ion-title>{{this.reap.devonianVersion}}</ion-title>
  </ion-toolbar>
</ion-footer> -->
